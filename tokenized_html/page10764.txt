using cipher.exe to decrypt efs encrypted file n.b maiden post in this environment please be kind to me and i 'll try to reciprocate p this question was relocated from microsoft community if there is a more appropriate location please let me know i worked in it for 40 years some of which was in microsoft support in the company where i worked so it sort of fits here. br because of my it background i can find the easy answers myself this question has that obscure ring i 'm having a battle with cipher.exe in my quest to decrypt all the efs encrypted files on my system first let 's get a list of all the encrypted files on my local disks cipher.exe /u /n cipher.temp inside the file cipher.temp is the line f \backups\ user\tools\tee.exe in explorer i navigate to this file where i see tee.exe in green the sign of an encrypted file so i execute the command cipher.exe -d f \backups\ user\tools\tee.exe the output is as follows c user\tools cipher.exe -d f \backups\ user\tools\tee.exe listing c user\tools\ new files added to this directory will not be encrypted listing f \backups\ user\tools\ new files added to this directory will not be encrypted e tee.exe c user\tools now what does that e on the last line of output signify error well the file is still encrypted so that 's probable let 's try adding the -a switch which causes cipher.exe to operate on files as well as directories c user\tools cipher.exe -d -a f \backups\ user\tools\tee.exe listing c user\tools\ new files added to this directory will not be encrypted listing c user\tools\ new files added to this directory will not be encrypted listing f \backups\ user\tools\ new files added to this directory will not be encrypted e tee.exe c user\tools no progress there where next well let 's do it through the gui in explorer 1 open the properties of tee.exe 2 click advanced 3 clear the check against encrypt contents to secure data 4 click ok twice 5. tee.exe is no longer encrypted so it was n't protected in any way so why did cipher fail p.s i discovered that i could use cipher.exe to decrypt my files by working out all of the directories which contained efs encrypted files then using the command syntax cipher.exe /d directory path \* since my objective was to decypher all of my efs files so i could make a couple of changes which might conceivably revoke my access i no longer have any encrypted files to experiment with so my question s above are now mostly hypothetical i 'm still curious though the circumstances that led up to this were unusual and it would be nice to shed some light onto what happened my userid got converted from local account to microsoft account and that started the ball rolling p br edited by steve.j.swift wednesday july 19 2017 4:10 pm added p.s section wednesday july 19 2017 3:50 pm reply quote all replies text/html 7/20/2017 2:46:45 am teemo tang 0 0 sign in to vote hi steve i have tested your command on my computer for many times no result so i can t reproduce your scenario for test in my opinion we just need to use cipher /u command then it will list encrypted folders and files if system owns next use cipher /a /d /s directory path command to decrypt folder and files i use this way successfully many times there is a microsoft document introducing detailed information have a look https //technet.microsoft.com/en-us/library/bb490878.aspx regards please remember to mark the replies as answers if they help if you have feedback for technet subscriber support contact a href= mailto tnmff microsoft.com tnmff microsoft.com a i created a lengthy reply which contained neither images nor links but could n't get past the prompt reminding me that these were n't allowed until my account was verified then we can have a spot the image or link game yes if you want to upload a picture in the post to make explanation more clear you need to verify your forum account please check the document i mentioned in last reply smart as you can use correct parameter to encrypt or decrypt files please remember to mark the replies as answers if they help if you have feedback for technet subscriber support contact a href= mailto tnmff microsoft.com tnmff microsoft.com a in my opinion we just need to use cipher /u command then it will list encrypted folders and files if system owns span next use cipher /a /d /s directory path command to decrypt folder and files span i use this way successfully many times there is a microsoft document introducing detailed information have a look span p i used your suggestion quite a few times during this episode so much so that i eventually created a decrypt_all script to do it automatically br incidentally the background to all of this was a series of unexpected events read on if you 're interested br 1 i 'd been prompted for a schedule to apply a really big windows update but had yet to do anything about this 2 when i got to my pc early one morning it was already applying the update. br 3 i could n't logon to my steve userid as unbeknown to me it had been converted to microsoft account 4 when i realised that i had to use my microsoft account the password that i had for it did n't work. br 5 when i tried to reset the password for the microsoft account it repeatedly said that it had succeeded but the new password did n't work at this time my isp was experiencing catastrophic session drops followed by immediate re-connections i did n't notice any but this is probably related 6 perhaps the most unexpected event after about three days my ms account password was successfully reset and access to my efs files was intact this marked the period where cipher.exe would not decrypt a few individual files but the gui worked on every one i tried but it got tedious hence this post. br i 've found a raft of documentation on cipher.exe i 'd still like to understand what that quot e quot prefix was all about it may be documented if i 'm lucky i usually am it accompanied every failure to decrypt whereas the quot u quot prefix accompanied only successful un-encryptions we can make our own choices what that might mean nbsp br please remember to mark the replies as answers if they help. br if you have feedback for technet subscriber support contact tnmff microsoft.com div thursday july 20 2017 1:19 pm reply quote text/html 7/21/2017 1:37:26 am teemo tang 0 0 sign in to vote ok thing sounds interesting i didn t expected that you have made it by a decrypt script great there are some of my understanding for your reference only cipher /u this option is used to find all the encrypted files on the local drives and will update the user 's file encryption key or recovery keys of the encrypted files to use the current keys if changed since encrypted cipher /u /n this option is used to find all the encrypted files on the local drives and will not update the encryption keys if you add this sentence after above command userprofile \desktop\encryptedfiles.txt you will now have a encryptedfiles.txt file on your desktop with a list of all encrypted files in system cipher /e encrypts the specified folders folders are marked so that files that are added to the folder later are encrypted too regards please remember to mark the replies as answers if they help if you have feedback for technet subscriber support contact a href= mailto tnmff microsoft.com tnmff microsoft.com a the syntax for the cipher should be as below cipher /e /d /c /s directory /b /h pathname cipher /k cipher /r filename /smartcard cipher /u /n cipher /w directory cipher /x efsfile filename cipher /y cipher /adduser /certhash hash /certfile filename /s directory /b /h pathname cipher /removeuser /certhash hash /s directory /b /h pathname cipher /rekey pathname however i noticed that the command you used to decrypt file is cipher.exe -d f \backups\ user\tools\tee.exe since the cipher.exe can not recognize the -d it ran without parameters and displayed the encryption status of each of the files and subdirectories in the current directory encrypted files and directories are marked with an e. unencrypted files and directories are marked with a u please remember to mark the replies as answers if they help if you have feedback for technet subscriber support contact a href= mailto tnmff microsoft.com tnmff microsoft.com a please help me answering this question.. i have done data encryption for my files in windows 7 32bit the files were in drive e and i have formatted the drive c so i have no backup keys for the efs and no certificates p and now am unable to decrypt my files or reach them any more is there any way i can take my files back.. they means a lot for me please give me a positive answer.. and i will be so thankful regards