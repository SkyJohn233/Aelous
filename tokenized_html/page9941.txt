pokemongo clone in unity3d using mapzen openstreetmap api brnkhy unity3d game development brnkhy unity3d game development so my last post from 2014 december kinda exploded after the pokemongo craziness and i decided to fix improve it further i ll try to make a little blog post series on this one starting with fixing/refactoring the old sample and then moving further and adding character movement dynamic tile loader etc etc i m planning to have a proper go clone when i m done i ll keep the post short as it s quite time-consuming for me to write these as i m still not feeling that comfortable writing in english it ll get there but i ll try to explain what s going on as much as i can but before we start especially if you haven t seen the old post openstreetmap in unity3d i suggest checking that out first it ll be much easier/clear after that so first of all you can get it here pokemongo clone mapzen sample and i ll try to explain going over that here now extract the package open scene file basicloader and run it you should get something like this well it s looks kinda ugly yea but we ll go into technical stuff before eye candy there are two gameobjects in the scene first one is the camera which is pretty much standard camera with just one script stratecam attached it s a quite handy little orbit rts cam script second one is world and that s where all the magic happens actually world script is just an entry interface script there is no logic or anything behind it it s just a container and starting point for the real thing tilemanager tilemanager is the script responsible for handling everything about tms tiles for now it just loads and created tiles but in the future posts we ll do a lot more here like dynamically loading/destroy tiles depending on player position etc tile script does pretty much everything that sounds quite wrong i know might refactor that later it loads the data this should be a service bad idea doing it here creates tile and uses buildingfactory and roadfactory classes to create building and road meshes/gameobjects respectively as i said i ll probably do some refactoring here but it s quite straight forward for now load data create tile load map image if necessary create buildings create roads buildingfactory and roadfactory are two simple factories for creating meshes and gameobjects given json objects and a relative position owner tile center we ll add extra stuff like fancy building model construction or curvy roads here there are also some temporary read wrong stuff in there like using the first corner of a building/road as a unique identifier yes it s wrong but somehow i couldn t get mapzen id s to work for me couldn t get my json parser to parse id s properly i ll look into that later on as well and that s pretty much it quite simple for now but i ll be adding much more soon character movement and dynamic tile handling should be next two big things hope you guys like it let me know if you have any questions or whatever i ll be playing pokemongo around cheers baran download pokemongo clone using mapzen api project pokemongo clone using mapzen – part 5 layers 25/08/2016 in game development pokemongo clone using mapzen – part 6 offline maps 01/09/2016 in game development pokemongo clone using mapzen part 3 dynamic tile loader 01/08/2016 in game development hello you did an amazing work it works really well i work around your code today and i was able to get every crossroads for making a traffic system and to load tiles dynamicly i would like to know before continuing my project if we re allowed to use parts of your code for our projects or not hey leo i m glad that it worked without any issues and you liked it i m already almost ready for the second post and i ll try to wrap it around in a few days writing the post is really the hardest part you can use it anyway you want anywhere you want so legally speaking it s pretty much wtfpl license http //www.wtfpl.net i just see a blue screen when i hit the play button i am fairly new to unity hey any chance you forgot to open basicloader scene it s inside the scenes folder just double click and you ll see some new stuff in the hierarchy panel on the left side then hit run and it should load everything if not there might be a problem with your internet connection as it pulls everything from mapzen servers no data no tiles hi don t you know why my hierarchy tree is empty unity 4.6.2 i tried few times to open just window title changed and still empty scene hey pawel sorry for the late response i have no idea admittedly i ll try to look into it after the 3rd part but i guess the scenario files from latest version simply isn t compatible with 4.6.2 you don t need the scene file though as it s empty anyway all you need is world tilemanager buildingfactory as child of tilemanager roadfactory as child of tilemanager scripts if i recall correctly thnx that was the problem now i have some cors issues because mapzen doesn t have a crossdomain.xml hosted and the webplayer needs it i guess i am using latest unity in windows 10 is building for the web player the same is building an swf file or hmm i have no idea about the cors thing never tried this on webplayer before but that s pretty much an isolated issue you can either fix the api calls with something playing along cross domain calls or if you dont need the whole world can cache the tile data and load from file i inspect scene and can t understand why even 4-corner square buildings have 8 vertices and 10 tris hye pimenov you re quite right actually and that s only because i forgot some leftover code in the buildingpolygon class at the moment it s actually creating 3d buildings but with 0 height so given a rectangular building one roof and four sides that makes 8 vertices and 10 triangles so that s it code is broken though even if you fix the height parameter i already fixed that and will post it in a few days thanks hi again few minutes ago i look closer and found a mistake i fix it by replacing your private static mesh createmesh list verts method with mine now it works fine private mesh mymeshcreating list verts var tris new triangulator verts.select x x.tovector2xz .toarray int indices tris.triangulate vector3 vertices new vector3 verts.count for int i 0 i vertices.length i++ vertices i new vector3 verts i .x 0 verts i .z mesh msh new mesh msh.vertices vertices msh.triangles indices msh.recalculatenormals msh.recalculatebounds return msh hey pimenov try this one http //pastebin.com/j8r5qb0v will expire in a week but i ll post this in next update anyway it ll look much better it s perfect thank you very much i m just new with 3d all times before i just work with 2d games and it s very interesting for me now glad you like it man thanks for putting this together but after importing the package into an empty project and running the basicloader scene i get the following two errors addcomponent with monobehaviour is not allowed create a class that derives from monobehaviour and add it instead unityengine.gameobject addcomponent assets.helpers.coroutinestarter .cctor at assets/helpers/coroutinestarter.cs:32 assets.tilemanager init buildingfactory roadfactory settings at assets/models/tilemanager.cs:53 assets.tilemanager init buildingfactory roadfactory settings at assets/models/tilemanager.cs:50 world start at assets/models/world.cs:24 nullreferenceexception object reference not set to an instance of an object assets.helpers.coroutinestarter..cctor at assets/helpers/coroutinestarter.cs:33 rethrow as typeinitializationexception an exception was thrown by the type initializer for assets.helpers.coroutinestarter assets.tilemanager.init assets.models.factories.buildingfactory buildingfactory assets.models.factories.roadfactory roadfactory .settings settings at assets/models/tilemanager.cs:50 world.start at assets/models/world.cs:24 it compiles fine but throws these runtime errors any suggestions thanks chris hey that s interesting have you tried the new version in the third post if i recall correctly i removed coroutinestarter class there that did it thanks for the great tutorial great work bro im working for our game development subject so i can graduate for college we are replicating the game pokemon go also can you tell how to change the location hey answered that in http //barankahyaoglu.com/dev/pokemongo-clone-using-mapzen-part-3/ i get an .tar file when i extract the project sample when i extract it again it cointains folders with random numbers need help pls im really new to this thanks hmm i guess you re trying to unzip the unitypackage file that won t work just open an empty project in unity and import the packagefile it ll extract everything automatically hi brnkhy i run into the following issues unity 5.4.2 addcomponent with monobehaviour is not allowed create a class that derives from monobehaviour and add it instead unityengine.gameobject addcomponent assets.helpers.coroutinestarter .cctor at assets/helpers/coroutinestarter.cs:32 assets.tilemanager init buildingfactory roadfactory settings at assets/models/tilemanager.cs:53 assets.tilemanager init buildingfactory roadfactory settings at assets/models/tilemanager.cs:50 world start at assets/models/world.cs:24 nullreferenceexception object reference not set to an instance of an object assets.helpers.coroutinestarter..cctor at assets/helpers/coroutinestarter.cs:33 rethrow as typeinitializationexception an exception was thrown by the type initializer for assets.helpers.coroutinestarter assets.tilemanager.init assets.models.factories.buildingfactory buildingfactory assets.models.factories.roadfactory roadfactory .settings settings at assets/models/tilemanager.cs:50 world.start at assets/models/world.cs:24 anything i missed hey wensi i thought i removed coroutinestarter from project long long ago which version are you using i ll try to check this asap thanks hello brnkhy i got error on unirx.mainthreaddispatcher.startcoroutine ienumerator routine at assets/plugins/unirx/scripts/unityenginebridge/mainthreaddispatcher.cs:367 hey romit it was an error with old unirx package i updated the unirx and uploaded the new package can you please try that one and let me know if everything is alright i have the same problem addcomponent with monobehaviour is not allowed create a class that derives from monobehaviour and add it instead unityengine.gameobject addcomponent assets.helpers.coroutinestarter .cctor at assets/helpers/coroutinestarter.cs:32 nullreferenceexception object reference not set to an instance of an object assets.helpers.coroutinestarter..cctor at assets/helpers/coroutinestarter.cs:33 well i took your example from part 3 that works hey nicklas glad it works good day sir can i change the location with my current location and move like in pokemon go that will only move if the location of the mobile with that application is moved hello there i haven t done the gps thing and i probably won t anytime soon i highly suggest checking following mapbox unitysdk though i 'm working at mapbox as unity3d developer and working on the mapbox unity3d sdk now wohoooooo brnkahyaoglu gmail.com email address subscribe